<div class="preview-content panel panel-default flex-col">
    <div class="panel-header flex-inline flex-align-center"
         ng-if="!$ctrl.mediator.isPreview">
        <span class="title">
            Subject line:
        </span>
        <span class="subject">
            <input type="text"
                   class="bulleted-input"
                   ng-model="$ctrl.mediator.model.getterSetter('subject', true)"
                   ng-model-options="{getterSetter: true}"
                   placeholder="Message subject">
        </span>
    </div>
    <div class="panel-header flex-inline flex-align-center"
         ng-if="$ctrl.mediator.isPreview">
        <span class="subject-preview"
              ng-class="{'empty': !$ctrl.mediator.model.get('subject', true)}"
              ng-bind="$ctrl.mediator.model.get('subject', true) ? $ctrl.mediator.model.get('subject', true) : 'No subject line was added'">
        </span>
    </div>

    <div class="insert-toolbar panel panel-default"
         ng-if="!$ctrl.mediator.isPreview"
         ri-draggable>
        <span ri-draggable-pointer>
            <i class="fa fa-arrows"></i>
        </span>
        <text-editor-insert-toolbar class="text-editor-insert-toolbar"
                                    editor="$ctrl.editor"></text-editor-insert-toolbar>
    </div>

    <div class="email-body">
        <text-editor refer="$ctrl.editor"
                     ng-if="!$ctrl.mediator.isPreview"
                     placeholder="Type your message here..."
                     ng-model="$ctrl.mediator.model.getterSetter('json_blocks', true)"
                     ng-model-options="{getterSetter: true}">
        </text-editor>
        <span ng-if="$ctrl.mediator.isPreview"
              ng-bind-html="$ctrl.mediator.model.options('messageBody', true)">
        </span>
    </div>
</div>

<div class="email-footer-detail">
    <div class="message-from pull-left" ng-if="$ctrl.mediator.getAssign($ctrl.mediator.model.get('from_id', true))">
        <avatar item="$ctrl.mediator.getAssign($ctrl.mediator.model.get('from_id', true))" size="30"></avatar>
        {{$ctrl.mediator.getAssignName($ctrl.mediator.model.get('from_id', true), 'None')}}
    </div>
    <div class="unsubscribe pull-right"
         ng-if="$ctrl.mediator.model.options('show_unsubscribe_link_backup')">
        Unsubscribe
    </div>

    <div class="clearfix"></div>

    <div class="copyright">
        Powered by <b>Riika</b>
    </div>
</div>
