module.exports = function (module) {
    const emojione = require('emojione');
    const sizes = [24, 32, 64];
    const defaultSize = 32;
    const imgRegexp = /<img (contenteditable)?[^>]*alt="(.*?)"[^>]*emojione[^>]*>/g;
    const fakeImgUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=';

    const regUnicode = new RegExp(emojione.regUnicode
        .source
        .split('|')
        .filter(i => i.indexOf('<span') === -1)
        .join('|'), 'g');

    function unicodeToImage(str, size = defaultSize) {
        let mappedUnicode = emojione.mapUnicodeToShort(),
            eList = emojione.emojioneList;
        if (!sizes.includes(size)) {
            size = defaultSize;
        }

        str = str.replace(regUnicode, function (unicodeChar) {

            if ((typeof unicodeChar === 'undefined') || (unicodeChar === '') || !(unicodeChar in emojione.jsEscapeMap)) {
                return unicodeChar;
            }
            let code = emojione.jsEscapeMap[unicodeChar],
                short = mappedUnicode[code],
                fname = eList[short].uc_base;

            let category = (fname.includes('-1f3f')) ? 'diversity' : eList[short].category,
                alt = emojione.convert(eList[short].uc_output.toUpperCase()),
                title = 'title="' + short + '"';
            return `<img src="${fakeImgUrl}" alt="${alt}" class="emojione emojione-${size}-${category} _${fname}" ${title}>`;
        });
        return str;
    }

    module
        .factory('emojis', function () {
            'ngInject';
            const regStr = '\ud83c[\udf00-\udfff]|\ud83d[\udc00-\ude4f]|\ud83d[\ude80-\udeff]';
            const regExpTest = new RegExp(`^(${regStr})$`);
            const spaceRegexp = /\u200B|\s/g;

            const list = [
                {
                    title: 'Frequently used',
                    list: [
                        ['ðŸ‘', 'thumbs_up'],
                        ['ðŸ‘Ž', '-1'],
                        ['ðŸ˜­', 'sob'],
                        ['ðŸ˜•', 'confused'],
                        ['ðŸ˜', 'neutral_face'],
                        ['ðŸ˜Š', 'blush'],
                        ['ðŸ˜', 'heart_eyes']
                    ]
                },
                {
                    title: 'People',
                    list: [
                        ['ðŸ˜„', 'smile'],
                        ['ðŸ˜ƒ', 'smiley'],
                        ['ðŸ˜€', 'grinning'],
                        ['ðŸ˜Š', 'blush'],
                        ['ðŸ˜‰', 'wink'],
                        ['ðŸ˜', 'heart_eyes'],
                        ['ðŸ˜˜', 'kissing_heart'],
                        ['ðŸ˜š', 'kissing_closed_eyes'],
                        ['ðŸ˜—', 'kissing'],
                        ['ðŸ˜™', 'kissing_smiling_eyes'],
                        ['ðŸ˜œ', 'stuck_out_tongue_winking_eye'],
                        ['ðŸ˜', 'stuck_out_tongue_closed_eyes'],
                        ['ðŸ˜›', 'stuck_out_tongue'],
                        ['ðŸ˜³', 'flushed'],
                        ['ðŸ˜', 'grin'],
                        ['ðŸ˜”', 'pensive'],
                        ['ðŸ˜Œ', 'relieved'],
                        ['ðŸ˜’', 'unamused'],
                        ['ðŸ˜ž', 'disappointed'],
                        ['ðŸ˜£', 'persevere'],
                        ['ðŸ˜¢', 'cry'],
                        ['ðŸ˜‚', 'joy'],
                        ['ðŸ˜­', 'sob'],
                        ['ðŸ˜ª', 'sleepy'],
                        ['ðŸ˜¥', 'disappointed_relieved'],
                        ['ðŸ˜°', 'cold_sweat'],
                        ['ðŸ˜…', 'sweat_smile'],
                        ['ðŸ˜“', 'sweat'],
                        ['ðŸ˜©', 'weary'],
                        ['ðŸ˜«', 'tired_face'],
                        ['ðŸ˜¨', 'fearful'],
                        ['ðŸ˜±', 'scream'],
                        ['ðŸ˜ ', 'angry'],
                        ['ðŸ˜¡', 'rage'],
                        ['ðŸ˜¤', 'triumph'],
                        ['ðŸ˜–', 'confounded'],
                        ['ðŸ˜†', 'laughing'],
                        ['ðŸ˜‹', 'yum'],
                        ['ðŸ˜·', 'mask'],
                        ['ðŸ˜Ž', 'sunglasses'],
                        ['ðŸ˜´', 'sleeping'],
                        ['ðŸ˜µ', 'dizzy_face'],
                        ['ðŸ˜²', 'astonished'],
                        ['ðŸ˜Ÿ', 'worried'],
                        ['ðŸ˜¦', 'frowning'],
                        ['ðŸ˜§', 'anguished'],
                        ['ðŸ‘¿', 'imp'],
                        ['ðŸ˜®', 'open_mouth'],
                        ['ðŸ˜¬', 'grimacing'],
                        ['ðŸ˜', 'neutral_face'],
                        ['ðŸ˜•', 'confused'],
                        ['ðŸ˜¯', 'hushed'],
                        ['ðŸ˜', 'smirk'],
                        ['ðŸ˜‘', 'expressionless'],
                        ['ðŸ‘²', 'man_with_gua_pi_mao'],
                        ['ðŸ‘³', 'man_with_turban'],
                        ['ðŸ‘®', 'cop'],
                        ['ðŸ‘·', 'construction_worker'],
                        ['ðŸ’‚', 'guardsman'],
                        ['ðŸ‘¶', 'baby'],
                        ['ðŸ‘¦', 'boy'],
                        ['ðŸ‘§', 'girl'],
                        ['ðŸ‘¨', 'man'],
                        ['ðŸ‘©', 'woman'],
                        ['ðŸ‘´', 'older_man'],
                        ['ðŸ‘µ', 'older_woman'],
                        ['ðŸ‘±', 'person_with_blond_hair'],
                        ['ðŸ‘¼', 'angel'],
                        ['ðŸ‘¸', 'princess'],
                        ['ðŸ˜º', 'smiley_cat'],
                        ['ðŸ˜¸', 'smile_cat'],
                        ['ðŸ˜»', 'heart_eyes_cat'],
                        ['ðŸ˜½', 'kissing_cat'],
                        ['ðŸ˜¼', 'smirk_cat'],
                        ['ðŸ™€', 'scream_cat'],
                        ['ðŸ˜¿', 'crying_cat_face'],
                        ['ðŸ˜¹', 'joy_cat'],
                        ['ðŸ˜¾', 'pouting_cat'],
                        ['ðŸ‘¹', 'japanese_ogre'],
                        ['ðŸ‘º', 'japanese_goblin'],
                        ['ðŸ™ˆ', 'see_no_evil'],
                        ['ðŸ™‰', 'hear_no_evil'],
                        ['ðŸ™Š', 'speak_no_evil'],
                        ['ðŸ’€', 'skull'],
                        ['ðŸ‘½', 'alien'],
                        ['ðŸ’©', 'hankey'],
                        ['ðŸ”¥', 'fire'],
                        ['âœ¨', 'sparkles'],
                        ['ðŸŒŸ', 'star2'],
                        ['ðŸ’«', 'dizzy'],
                        ['ðŸ’¥', 'boom'],
                        ['ðŸ’¢', 'anger'],
                        ['ðŸ’¦', 'sweat_drops'],
                        ['ðŸ’§', 'droplet'],
                        ['ðŸ’¤', 'zzz'],
                        ['ðŸ’¨', 'dash'],
                        ['ðŸ‘‚', 'ear'],
                        ['ðŸ‘€', 'eyes'],
                        ['ðŸ‘ƒ', 'nose'],
                        ['ðŸ‘…', 'tongue'],
                        ['ðŸ‘„', 'lips'],
                        ['ðŸ‘', 'thumbs_up'],
                        ['ðŸ‘Ž', '-1'],
                        ['ðŸ‘Œ', 'ok_hand'],
                        ['ðŸ‘Š', 'facepunch'],
                        ['âœŠ', 'fist'],
                        ['ðŸ‘‹', 'wave'],
                        ['âœ‹', 'hand'],
                        ['ðŸ‘', 'open_hands'],
                        ['ðŸ‘†', 'point_up_2'],
                        ['ðŸ‘‡', 'point_down'],
                        ['ðŸ‘‰', 'point_right'],
                        ['ðŸ‘ˆ', 'point_left'],
                        ['ðŸ™Œ', 'raised_hands'],
                        ['ðŸ™', 'pray'],
                        ['ðŸ‘', 'clap'],
                        ['ðŸ’ª', 'muscle'],
                        ['ðŸš¶', 'walking'],
                        ['ðŸƒ', 'runner'],
                        ['ðŸ’ƒ', 'dancer'],
                        ['ðŸ‘«', 'couple'],
                        ['ðŸ‘ª', 'family'],
                        ['ðŸ’', 'couplekiss'],
                        ['ðŸ’‘', 'couple_with_heart'],
                        ['ðŸ‘¯', 'dancers'],
                        ['ðŸ™†', 'ok_woman'],
                        ['ðŸ™…', 'no_good'],
                        ['ðŸ’', 'information_desk_person'],
                        ['ðŸ™‹', 'raising_hand'],
                        ['ðŸ’†', 'massage'],
                        ['ðŸ’‡', 'haircut'],
                        ['ðŸ’…', 'nail_care'],
                        ['ðŸ‘°', 'bride_with_veil'],
                        ['ðŸ™Ž', 'person_with_pouting_face'],
                        ['ðŸ™', 'person_frowning'],
                        ['ðŸ™‡', 'bow'],
                        ['ðŸŽ©', 'tophat'],
                        ['ðŸ‘‘', 'crown'],
                        ['ðŸ‘’', 'womans_hat'],
                        ['ðŸ‘Ÿ', 'athletic_shoe'],
                        ['ðŸ‘ž', 'mans_shoe'],
                        ['ðŸ‘¡', 'sandal'],
                        ['ðŸ‘ ', 'high_heel'],
                        ['ðŸ‘¢', 'boot'],
                        ['ðŸ‘•', 'shirt'],
                        ['ðŸ‘”', 'necktie'],
                        ['ðŸ‘š', 'womans_clothes'],
                        ['ðŸ‘—', 'dress'],
                        ['ðŸŽ½', 'running_shirt_with_sash'],
                        ['ðŸ‘–', 'jeans'],
                        ['ðŸ‘˜', 'kimono'],
                        ['ðŸ‘™', 'bikini'],
                        ['ðŸ’¼', 'briefcase'],
                        ['ðŸ‘œ', 'handbag'],
                        ['ðŸ‘', 'pouch'],
                        ['ðŸ‘›', 'purse'],
                        ['ðŸ‘“', 'eyeglasses'],
                        ['ðŸŽ€', 'ribbon'],
                        ['ðŸŒ‚', 'closed_umbrella'],
                        ['ðŸ’„', 'lipstick'],
                        ['ðŸ’›', 'yellow_heart'],
                        ['ðŸ’™', 'blue_heart'],
                        ['ðŸ’œ', 'purple_heart'],
                        ['ðŸ’š', 'green_heart'],
                        ['ðŸ’”', 'broken_heart'],
                        ['ðŸ’—', 'heartpulse'],
                        ['ðŸ’“', 'heartbeat'],
                        ['ðŸ’•', 'two_hearts'],
                        ['ðŸ’–', 'sparkling_heart'],
                        ['ðŸ’ž', 'revolving_hearts'],
                        ['ðŸ’˜', 'cupid'],
                        ['ðŸ’Œ', 'love_letter'],
                        ['ðŸ’‹', 'kiss'],
                        ['ðŸ’', 'ring'],
                        ['ðŸ’Ž', 'gem'],
                        ['ðŸ‘¤', 'bust_in_silhouette'],
                        ['ðŸ’¬', 'speech_balloon'],
                        ['ðŸ‘£', 'footprints']
                    ]
                },
                {
                    title: 'Nature',
                    list: [
                        ['ðŸ¶', 'dog'],
                        ['ðŸº', 'wolf'],
                        ['ðŸ±', 'cat'],
                        ['ðŸ­', 'mouse'],
                        ['ðŸ¹', 'hamster'],
                        ['ðŸ°', 'rabbit'],
                        ['ðŸ¸', 'frog'],
                        ['ðŸ¯', 'tiger'],
                        ['ðŸ¨', 'koala'],
                        ['ðŸ»', 'bear'],
                        ['ðŸ·', 'pig'],
                        ['ðŸ½', 'pig_nose'],
                        ['ðŸ®', 'cow'],
                        ['ðŸ—', 'boar'],
                        ['ðŸµ', 'monkey_face'],
                        ['ðŸ’', 'monkey'],
                        ['ðŸ´', 'horse'],
                        ['ðŸ‘', 'sheep'],
                        ['ðŸ˜', 'elephant'],
                        ['ðŸ¼', 'panda_face'],
                        ['ðŸ§', 'penguin'],
                        ['ðŸ¦', 'bird'],
                        ['ðŸ¤', 'baby_chick'],
                        ['ðŸ¥', 'hatched_chick'],
                        ['ðŸ£', 'hatching_chick'],
                        ['ðŸ”', 'chicken'],
                        ['ðŸ', 'snake'],
                        ['ðŸ¢', 'turtle'],
                        ['ðŸ›', 'bug'],
                        ['ðŸ', 'bee'],
                        ['ðŸœ', 'ant'],
                        ['ðŸž', 'beetle'],
                        ['ðŸŒ', 'snail'],
                        ['ðŸ™', 'octopus'],
                        ['ðŸš', 'shell'],
                        ['ðŸ ', 'tropical_fish'],
                        ['ðŸŸ', 'fish'],
                        ['ðŸ¬', 'dolphin'],
                        ['ðŸ³', 'whale'],
                        ['ðŸŽ', 'racehorse'],
                        ['ðŸ²', 'dragon_face'],
                        ['ðŸ¡', 'blowfish'],
                        ['ðŸ«', 'camel'],
                        ['ðŸ©', 'poodle'],
                        ['ðŸ¾', 'feet'],
                        ['ðŸ’', 'bouquet'],
                        ['ðŸŒ¸', 'cherry_blossom'],
                        ['ðŸŒ·', 'tulip'],
                        ['ðŸ€', 'four_leaf_clover'],
                        ['ðŸŒ¹', 'rose'],
                        ['ðŸŒ»', 'sunflower'],
                        ['ðŸŒº', 'hibiscus'],
                        ['ðŸ', 'maple_leaf'],
                        ['ðŸƒ', 'leaves'],
                        ['ðŸ‚', 'fallen_leaf'],
                        ['ðŸŒ¿', 'herb'],
                        ['ðŸŒ¾', 'ear_of_rice'],
                        ['ðŸ„', 'mushroom'],
                        ['ðŸŒµ', 'cactus'],
                        ['ðŸŒ´', 'palm_tree'],
                        ['ðŸŒ°', 'chestnut'],
                        ['ðŸŒ±', 'seedling'],
                        ['ðŸŒ¼', 'blossom'],
                        ['ðŸŒ‘', 'new_moon'],
                        ['ðŸŒ“', 'first_quarter_moon'],
                        ['ðŸŒ”', 'moon'],
                        ['ðŸŒ•', 'full_moon'],
                        ['ðŸŒ›', 'first_quarter_moon_with_face'],
                        ['ðŸŒ™', 'crescent_moon'],
                        ['ðŸŒ', 'earth_asia'],
                        ['ðŸŒ‹', 'volcano'],
                        ['ðŸŒŒ', 'milky_way'],
                        ['ðŸŒ ', 'stars'],
                        ['â›…', 'partly_sunny'],
                        ['â›„', 'snowman'],
                        ['ðŸŒ€', 'cyclone'],
                        ['ðŸŒ', 'foggy'],
                        ['ðŸŒˆ', 'rainbow'],
                        ['ðŸŒŠ', 'ocean']
                    ]
                },
                {
                    title: 'Objects',
                    list: [
                        ['ðŸŽ', 'bamboo'],
                        ['ðŸ’', 'gift_heart'],
                        ['ðŸŽŽ', 'dolls'],
                        ['ðŸŽ’', 'school_satchel'],
                        ['ðŸŽ“', 'mortar_board'],
                        ['ðŸŽ', 'flags'],
                        ['ðŸŽ†', 'fireworks'],
                        ['ðŸŽ‡', 'sparkler'],
                        ['ðŸŽ', 'wind_chime'],
                        ['ðŸŽ‘', 'rice_scene'],
                        ['ðŸŽƒ', 'jack_o_lantern'],
                        ['ðŸ‘»', 'ghost'],
                        ['ðŸŽ…', 'santa'],
                        ['ðŸŽ„', 'christmas_tree'],
                        ['ðŸŽ', 'gift'],
                        ['ðŸŽ‹', 'tanabata_tree'],
                        ['ðŸŽ‰', 'tada'],
                        ['ðŸŽŠ', 'confetti_ball'],
                        ['ðŸŽˆ', 'balloon'],
                        ['ðŸŽŒ', 'crossed_flags'],
                        ['ðŸ”®', 'crystal_ball'],
                        ['ðŸŽ¥', 'movie_camera'],
                        ['ðŸ“·', 'camera'],
                        ['ðŸ“¹', 'video_camera'],
                        ['ðŸ“¼', 'vhs'],
                        ['ðŸ’¿', 'cd'],
                        ['ðŸ“€', 'dvd'],
                        ['ðŸ’½', 'minidisc'],
                        ['ðŸ’¾', 'floppy_disk'],
                        ['ðŸ’»', 'computer'],
                        ['ðŸ“±', 'iphone'],
                        ['ðŸ“ž', 'telephone_receiver'],
                        ['ðŸ“Ÿ', 'pager'],
                        ['ðŸ“ ', 'fax'],
                        ['ðŸ“¡', 'satellite'],
                        ['ðŸ“º', 'tv'],
                        ['ðŸ“»', 'radio'],
                        ['ðŸ”Š', 'loud_sound'],
                        ['ðŸ””', 'bell'],
                        ['ðŸ“¢', 'loudspeaker'],
                        ['ðŸ“£', 'mega'],
                        ['â³', 'hourglass_flowing_sand'],
                        ['âŒ›', 'hourglass'],
                        ['â°', 'alarm_clock'],
                        ['âŒš', 'watch'],
                        ['ðŸ”“', 'unlock'],
                        ['ðŸ”’', 'lock'],
                        ['ðŸ”', 'lock_with_ink_pen'],
                        ['ðŸ”', 'closed_lock_with_key'],
                        ['ðŸ”‘', 'key'],
                        ['ðŸ”Ž', 'mag_right'],
                        ['ðŸ’¡', 'bulb'],
                        ['ðŸ”¦', 'flashlight'],
                        ['ðŸ”Œ', 'electric_plug'],
                        ['ðŸ”‹', 'battery'],
                        ['ðŸ”', 'mag'],
                        ['ðŸ›€', 'bath'],
                        ['ðŸš½', 'toilet'],
                        ['ðŸ”§', 'wrench'],
                        ['ðŸ”©', 'nut_and_bolt'],
                        ['ðŸ”¨', 'hammer'],
                        ['ðŸšª', 'door'],
                        ['ðŸš¬', 'smoking'],
                        ['ðŸ’£', 'bomb'],
                        ['ðŸ”«', 'gun'],
                        ['ðŸ”ª', 'hocho'],
                        ['ðŸ’Š', 'pill'],
                        ['ðŸ’‰', 'syringe'],
                        ['ðŸ’°', 'moneybag'],
                        ['ðŸ’´', 'yen'],
                        ['ðŸ’µ', 'dollar'],
                        ['ðŸ’³', 'credit_card'],
                        ['ðŸ’¸', 'money_with_wings'],
                        ['ðŸ“²', 'calling'],
                        ['ðŸ“§', 'e-mail'],
                        ['ðŸ“¥', 'inbox_tray'],
                        ['ðŸ“¤', 'outbox_tray'],
                        ['ðŸ“©', 'envelope_with_arrow'],
                        ['ðŸ“¨', 'incoming_envelope'],
                        ['ðŸ“«', 'mailbox'],
                        ['ðŸ“ª', 'mailbox_closed'],
                        ['ðŸ“®', 'postbox'],
                        ['ðŸ“¦', 'package'],
                        ['ðŸ“', 'memo'],
                        ['ðŸ“„', 'page_facing_up'],
                        ['ðŸ“ƒ', 'page_with_curl'],
                        ['ðŸ“‘', 'bookmark_tabs'],
                        ['ðŸ“Š', 'bar_chart'],
                        ['ðŸ“ˆ', 'chart_with_upwards_trend'],
                        ['ðŸ“‰', 'chart_with_downwards_trend'],
                        ['ðŸ“œ', 'scroll'],
                        ['ðŸ“‹', 'clipboard'],
                        ['ðŸ“…', 'date'],
                        ['ðŸ“†', 'calendar'],
                        ['ðŸ“‡', 'card_index'],
                        ['ðŸ“', 'file_folder'],
                        ['ðŸ“‚', 'open_file_folder'],
                        ['ðŸ“Œ', 'pushpin'],
                        ['ðŸ“Ž', 'paperclip'],
                        ['ðŸ“', 'straight_ruler'],
                        ['ðŸ“', 'triangular_ruler'],
                        ['ðŸ“•', 'closed_book'],
                        ['ðŸ“—', 'green_book'],
                        ['ðŸ“˜', 'blue_book'],
                        ['ðŸ“™', 'orange_book'],
                        ['ðŸ““', 'notebook'],
                        ['ðŸ“”', 'notebook_with_decorative_cover'],
                        ['ðŸ“’', 'ledger'],
                        ['ðŸ“š', 'books'],
                        ['ðŸ“–', 'book'],
                        ['ðŸ”–', 'bookmark'],
                        ['ðŸ“›', 'name_badge'],
                        ['ðŸ“°', 'newspaper'],
                        ['ðŸŽ¨', 'art'],
                        ['ðŸŽ¬', 'clapper'],
                        ['ðŸŽ¤', 'microphone'],
                        ['ðŸŽ§', 'headphones'],
                        ['ðŸŽ¼', 'musical_score'],
                        ['ðŸŽµ', 'musical_note'],
                        ['ðŸŽ¶', 'notes'],
                        ['ðŸŽ¹', 'musical_keyboard'],
                        ['ðŸŽ»', 'violin'],
                        ['ðŸŽº', 'trumpet'],
                        ['ðŸŽ·', 'saxophone'],
                        ['ðŸŽ¸', 'guitar'],
                        ['ðŸ‘¾', 'space_invader'],
                        ['ðŸŽ®', 'video_game'],
                        ['ðŸƒ', 'black_joker'],
                        ['ðŸŽ´', 'flower_playing_cards'],
                        ['ðŸ€„', 'mahjong'],
                        ['ðŸŽ²', 'game_die'],
                        ['ðŸŽ¯', 'dart'],
                        ['ðŸˆ', 'football'],
                        ['ðŸ€', 'basketball'],
                        ['âš½', 'soccer'],
                        ['âš¾', 'baseball'],
                        ['ðŸŽ¾', 'tennis'],
                        ['ðŸŽ±', '8ball'],
                        ['ðŸŽ³', 'bowling'],
                        ['â›³', 'golf'],
                        ['ðŸ', 'checkered_flag'],
                        ['ðŸ†', 'trophy'],
                        ['ðŸŽ¿', 'ski'],
                        ['ðŸ‚', 'snowboarder'],
                        ['ðŸŠ', 'swimmer'],
                        ['ðŸ„', 'surfer'],
                        ['ðŸŽ£', 'fishing_pole_and_fish'],
                        ['ðŸµ', 'tea'],
                        ['ðŸ¶', 'sake'],
                        ['ðŸº', 'beer'],
                        ['ðŸ»', 'beers'],
                        ['ðŸ¸', 'cocktail'],
                        ['ðŸ¹', 'tropical_drink'],
                        ['ðŸ·', 'wine_glass'],
                        ['ðŸ´', 'fork_and_knife'],
                        ['ðŸ•', 'pizza'],
                        ['ðŸ”', 'hamburger'],
                        ['ðŸŸ', 'fries'],
                        ['ðŸ—', 'poultry_leg'],
                        ['ðŸ–', 'meat_on_bone'],
                        ['ðŸ', 'spaghetti'],
                        ['ðŸ›', 'curry'],
                        ['ðŸ¤', 'fried_shrimp'],
                        ['ðŸ±', 'bento'],
                        ['ðŸ£', 'sushi'],
                        ['ðŸ¥', 'fish_cake'],
                        ['ðŸ™', 'rice_ball'],
                        ['ðŸ˜', 'rice_cracker'],
                        ['ðŸš', 'rice'],
                        ['ðŸœ', 'ramen'],
                        ['ðŸ²', 'stew'],
                        ['ðŸ¢', 'oden'],
                        ['ðŸ¡', 'dango'],
                        ['ðŸ³', 'egg'],
                        ['ðŸž', 'bread'],
                        ['ðŸ©', 'doughnut'],
                        ['ðŸ®', 'custard'],
                        ['ðŸ¦', 'icecream'],
                        ['ðŸ¨', 'ice_cream'],
                        ['ðŸ§', 'shaved_ice'],
                        ['ðŸŽ‚', 'birthday'],
                        ['ðŸ°', 'cake'],
                        ['ðŸª', 'cookie'],
                        ['ðŸ«', 'chocolate_bar'],
                        ['ðŸ¬', 'candy'],
                        ['ðŸ­', 'lollipop'],
                        ['ðŸ¯', 'honey_pot'],
                        ['ðŸŽ', 'apple'],
                        ['ðŸ', 'green_apple'],
                        ['ðŸŠ', 'tangerine'],
                        ['ðŸ’', 'cherries'],
                        ['ðŸ‡', 'grapes'],
                        ['ðŸ‰', 'watermelon'],
                        ['ðŸ“', 'strawberry'],
                        ['ðŸ‘', 'peach'],
                        ['ðŸˆ', 'melon'],
                        ['ðŸŒ', 'banana'],
                        ['ðŸ', 'pineapple'],
                        ['ðŸ ', 'sweet_potato'],
                        ['ðŸ†', 'eggplant'],
                        ['ðŸ…', 'tomato'],
                        ['ðŸŒ½', 'corn']
                    ]
                },
                {
                    title: 'Places',
                    list: [
                        ['ðŸ ', 'house'],
                        ['ðŸ¡', 'house_with_garden'],
                        ['ðŸ«', 'school'],
                        ['ðŸ¢', 'office'],
                        ['ðŸ£', 'post_office'],
                        ['ðŸ¥', 'hospital'],
                        ['ðŸ¦', 'bank'],
                        ['ðŸª', 'convenience_store'],
                        ['ðŸ©', 'love_hotel'],
                        ['ðŸ¨', 'hotel'],
                        ['ðŸ’’', 'wedding'],
                        ['â›ª', 'church'],
                        ['ðŸ¬', 'department_store'],
                        ['ðŸŒ‡', 'city_sunrise'],
                        ['ðŸŒ†', 'city_sunset'],
                        ['ðŸ¯', 'japanese_castle'],
                        ['ðŸ°', 'european_castle'],
                        ['â›º', 'tent'],
                        ['ðŸ­', 'factory'],
                        ['ðŸ—¼', 'tokyo_tower'],
                        ['ðŸ—¾', 'japan'],
                        ['ðŸ—»', 'mount_fuji'],
                        ['ðŸŒ„', 'sunrise_over_mountains'],
                        ['ðŸŒ…', 'sunrise'],
                        ['ðŸŒƒ', 'night_with_stars'],
                        ['ðŸ—½', 'statue_of_liberty'],
                        ['ðŸŒ‰', 'bridge_at_night'],
                        ['ðŸŽ ', 'carousel_horse'],
                        ['ðŸŽ¡', 'ferris_wheel'],
                        ['â›²', 'fountain'],
                        ['ðŸŽ¢', 'roller_coaster'],
                        ['ðŸš¢', 'ship'],
                        ['â›µ', 'boat'],
                        ['ðŸš¤', 'speedboat'],
                        ['ðŸš€', 'rocket'],
                        ['ðŸ’º', 'seat'],
                        ['ðŸš‰', 'station'],
                        ['ðŸš„', 'bullettrain_side'],
                        ['ðŸš…', 'bullettrain_front'],
                        ['ðŸš‡', 'metro'],
                        ['ðŸšƒ', 'railway_car'],
                        ['ðŸšŒ', 'bus'],
                        ['ðŸš™', 'blue_car'],
                        ['ðŸš—', 'car'],
                        ['ðŸš•', 'taxi'],
                        ['ðŸšš', 'truck'],
                        ['ðŸš¨', 'rotating_light'],
                        ['ðŸš“', 'police_car'],
                        ['ðŸš’', 'fire_engine'],
                        ['ðŸš‘', 'ambulance'],
                        ['ðŸš²', 'bike'],
                        ['ðŸ’ˆ', 'barber'],
                        ['ðŸš', 'busstop'],
                        ['ðŸŽ«', 'ticket'],
                        ['ðŸš¥', 'traffic_light'],
                        ['ðŸš§', 'construction'],
                        ['ðŸ”°', 'beginner'],
                        ['â›½', 'fuelpump'],
                        ['ðŸ®', 'izakaya_lantern'],
                        ['ðŸŽ°', 'slot_machine'],
                        ['ðŸ—¿', 'moyai'],
                        ['ðŸŽª', 'circus_tent'],
                        ['ðŸŽ­', 'performing_arts'],
                        ['ðŸ“', 'round_pushpin'],
                        ['ðŸš©', 'triangular_flag_on_post']
                    ]
                },
                {
                    title: 'Symbols',
                    list: [
                        ['ðŸ”Ÿ', 'keycap_ten'],
                        ['ðŸ”¢', '1234'],
                        ['ðŸ”£', 'symbols'],
                        ['ðŸ” ', 'capital_abcd'],
                        ['ðŸ”¡', 'abcd'],
                        ['ðŸ”¤', 'abc'],
                        ['ðŸ”¼', 'arrow_up_small'],
                        ['ðŸ”½', 'arrow_down_small'],
                        ['âª', 'rewind'],
                        ['â©', 'fast_forward'],
                        ['â«', 'arrow_double_up'],
                        ['â¬', 'arrow_double_down'],
                        ['ðŸ†—', 'ok'],
                        ['ðŸ†•', 'new'],
                        ['ðŸ†™', 'up'],
                        ['ðŸ†’', 'cool'],
                        ['ðŸ†“', 'free'],
                        ['ðŸ†–', 'ng'],
                        ['ðŸ“¶', 'signal_strength'],
                        ['ðŸŽ¦', 'cinema'],
                        ['ðŸˆ', 'koko'],
                        ['ðŸˆ¯', 'u6307'],
                        ['ðŸˆ³', 'u7a7a'],
                        ['ðŸˆµ', 'u6e80'],
                        ['ðŸˆ´', 'u5408'],
                        ['ðŸˆ²', 'u7981'],
                        ['ðŸ‰', 'ideograph_advantage'],
                        ['ðŸˆ¹', 'u5272'],
                        ['ðŸˆº', 'u55b6'],
                        ['ðŸˆ¶', 'u6709'],
                        ['ðŸˆš', 'u7121'],
                        ['ðŸš»', 'restroom'],
                        ['ðŸš¹', 'mens'],
                        ['ðŸšº', 'womens'],
                        ['ðŸš¼', 'baby_symbol'],
                        ['ðŸš¾', 'wc'],
                        ['ðŸš­', 'no_smoking'],
                        ['ðŸˆ¸', 'u7533'],
                        ['ðŸ‰‘', 'accept'],
                        ['ðŸ†‘', 'cl'],
                        ['ðŸ†˜', 'sos'],
                        ['ðŸ†”', 'id'],
                        ['ðŸš«', 'no_entry_sign'],
                        ['ðŸ”ž', 'underage'],
                        ['â›”', 'no_entry'],
                        ['âŽ', 'negative_squared_cross_mark'],
                        ['âœ…', 'white_check_mark'],
                        ['ðŸ’Ÿ', 'heart_decoration'],
                        ['ðŸ†š', 'vs'],
                        ['ðŸ“³', 'vibration_mode'],
                        ['ðŸ“´', 'mobile_phone_off'],
                        ['ðŸ†Ž', 'ab'],
                        ['ðŸ’ ', 'diamond_shape_with_a_dot_inside'],
                        ['â›Ž', 'ophiuchus'],
                        ['ðŸ”¯', 'six_pointed_star'],
                        ['ðŸ§', 'atm'],
                        ['ðŸ’¹', 'chart'],
                        ['ðŸ’²', 'heavy_dollar_sign'],
                        ['ðŸ’±', 'currency_exchange'],
                        ['âŒ', 'x'],
                        ['â—', 'exclamation'],
                        ['â“', 'question'],
                        ['â•', 'grey_exclamation'],
                        ['â”', 'grey_question'],
                        ['â­•', 'o'],
                        ['ðŸ”', 'top'],
                        ['ðŸ”š', 'end'],
                        ['ðŸ”™', 'back'],
                        ['ðŸ”›', 'on'],
                        ['ðŸ”œ', 'soon'],
                        ['ðŸ”ƒ', 'arrows_clockwise'],
                        ['ðŸ•›', 'clock12'],
                        ['ðŸ•', 'clock1'],
                        ['ðŸ•‘', 'clock2'],
                        ['ðŸ•’', 'clock3'],
                        ['ðŸ•“', 'clock4'],
                        ['ðŸ•”', 'clock5'],
                        ['ðŸ••', 'clock6'],
                        ['ðŸ•–', 'clock7'],
                        ['ðŸ•—', 'clock8'],
                        ['ðŸ•˜', 'clock9'],
                        ['ðŸ•™', 'clock10'],
                        ['ðŸ•š', 'clock11'],
                        ['âž•', 'heavy_plus_sign'],
                        ['âž–', 'heavy_minus_sign'],
                        ['âž—', 'heavy_division_sign'],
                        ['ðŸ’®', 'white_flower'],
                        ['ðŸ’¯', '100'],
                        ['ðŸ”˜', 'radio_button'],
                        ['ðŸ”—', 'link'],
                        ['âž°', 'curly_loop'],
                        ['ðŸ”±', 'trident'],
                        ['ðŸ”º', 'small_red_triangle'],
                        ['ðŸ”²', 'black_square_button'],
                        ['ðŸ”³', 'white_square_button'],
                        ['ðŸ”´', 'red_circle'],
                        ['ðŸ”µ', 'large_blue_circle'],
                        ['ðŸ”»', 'small_red_triangle_down'],
                        ['â¬œ', 'white_large_square'],
                        ['â¬›', 'black_large_square'],
                        ['ðŸ”¶', 'large_orange_diamond'],
                        ['ðŸ”·', 'large_blue_diamond'],
                        ['ðŸ”¸', 'small_orange_diamond'],
                        ['ðŸ”¹', 'small_blue_diamond']
                    ]
                }
            ];

            return {
                list,
                filter: function (search) {
                    let filtered = [];
                    search = search.toLowerCase();

                    function include(text) {
                        return text.toLowerCase().indexOf(search) > -1;
                    }

                    list.forEach(cat => {
                        if (include(cat.title)) {
                            filtered.push(cat);
                        } else {
                            let subList = [];
                            cat.list.forEach(emo => {
                                if (include(emo[1])) {
                                    subList.push(emo);
                                }
                            });
                            if (subList.length > 0) {
                                filtered.push({title: cat.title, list: subList});
                            }
                        }
                    });
                    return filtered;
                },
                test: function (text) {
                    return regExpTest.test(text.replace(spaceRegexp, ''));
                },
                toImage(str, size) {
                    return unicodeToImage(this.toText(str), size);
                },
                toText(str) {
                    return str.replace(imgRegexp, '$2');
                }
            };
        });
};
